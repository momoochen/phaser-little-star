{"version":3,"sources":["scripts/main.js"],"names":["game","Phaser","Game","AUTO","preload","create","update","render","load","image","require","spritesheet","player","aliens","bullets","bulletTime","cursors","fireButton","explosions","starfield","score","scoreString","scoreText","lives","enemyBullet","firingTimer","stateText","livingEnemies","enemyBullets","live","bullet","life","physics","startSystem","Physics","ARCADE","add","tileSprite","group","enableBody","physicsBodyType","createMultiple","setAll","sprite","anchor","setTo","scale","enable","createAliens","text","font","fill","world","width","centerX","centerY","align","visible","i","ship","angle","alpha","forEach","setupInvader","input","keyboard","createCursorKeys","addKey","Keyboard","SPACEBAR","y","x","alien","animations","play","body","moves","tween","to","Easing","Linear","None","onLoop","descend","invader","tilePosition","alive","velocity","left","isDown","right","up","down","fireBullet","time","now","enemyFires","arcade","overlap","collisionHandler","enemyHitsPlayer","kill","explosion","getFirstExists","reset","countLiving","callAll","onTap","addOnce","restart","getFirstAlive","length","forEachAlive","push","random","rnd","integerInRange","shooter","moveToObject","resetBullet","removeAll","revive"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAIA,OAAO,IAAIC,OAAOC,IAAX,CAAgB,GAAhB,EAAqB,GAArB,EAA0BD,OAAOE,IAAjC,EAAuC,gBAAvC,EAAyD,EAAEC,SAASA,OAAX,EAAoBC,QAAQA,MAA5B,EAAoCC,QAAQA,MAA5C,EAAoDC,QAAQA,MAA5D,EAAzD,CAAX;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAKA;AACA,SAASH,OAAT,GAAmB;;AAEfJ,SAAKQ,IAAL,CAAUC,KAAV,CAAgB,QAAhB,EAA0BC,QAAQ,uBAAR,CAA1B;AACAV,SAAKQ,IAAL,CAAUC,KAAV,CAAgB,aAAhB,EAA+BC,QAAQ,6BAAR,CAA/B;AACAV,SAAKQ,IAAL,CAAUG,WAAV,CAAsB,SAAtB,EAAiCD,QAAQ,gCAAR,CAAjC,EAA4E,EAA5E,EAAgF,EAAhF;AACAV,SAAKQ,IAAL,CAAUC,KAAV,CAAgB,MAAhB,EAAwBC,QAAQ,mBAAR,CAAxB;AACAV,SAAKQ,IAAL,CAAUG,WAAV,CAAsB,QAAtB,EAAgCD,QAAQ,wBAAR,CAAhC,EAAmE,GAAnE,EAAwE,GAAxE;AACAV,SAAKQ,IAAL,CAAUC,KAAV,CAAgB,WAAhB,EAA6BC,QAAQ,mBAAR,CAA7B;AACAV,SAAKQ,IAAL,CAAUC,KAAV,CAAgB,MAAhB,EAAwBC,QAAQ,oBAAR,CAAxB;AAGH;;AAED,IAAIE,MAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,OAAJ;AACA,IAAIC,aAAa,CAAjB;AACA,IAAIC,OAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,QAAQ,CAAZ;AACA,IAAIC,cAAc,EAAlB;AACA,IAAIC,SAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,WAAJ;AACA,IAAIC,cAAc,CAAlB;AACA,IAAIC,SAAJ;AACA,IAAIC,gBAAgB,EAApB;AACA,IAAIC,YAAJ;AACA,IAAIC,IAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,IAAJ;;AAEA,SAAS1B,MAAT,GAAkB;;AAEdL,SAAKgC,OAAL,CAAaC,WAAb,CAAyBhC,OAAOiC,OAAP,CAAeC,MAAxC;;AAEA;AACAhB,gBAAYnB,KAAKoC,GAAL,CAASC,UAAT,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,WAApC,CAAZ;;AAEA;AACAvB,cAAUd,KAAKoC,GAAL,CAASE,KAAT,EAAV;AACAxB,YAAQyB,UAAR,GAAqB,IAArB;AACAzB,YAAQ0B,eAAR,GAA0BvC,OAAOiC,OAAP,CAAeC,MAAzC;AACArB,YAAQ2B,cAAR,CAAuB,EAAvB,EAA2B,QAA3B;AACA3B,YAAQ4B,MAAR,CAAe,UAAf,EAA2B,GAA3B;AACA5B,YAAQ4B,MAAR,CAAe,UAAf,EAA2B,CAA3B;AACA5B,YAAQ4B,MAAR,CAAe,iBAAf,EAAkC,IAAlC;AACA5B,YAAQ4B,MAAR,CAAe,kBAAf,EAAmC,IAAnC;;AAEA;AACAd,mBAAe5B,KAAKoC,GAAL,CAASE,KAAT,EAAf;AACAV,iBAAaW,UAAb,GAA0B,IAA1B;AACAX,iBAAaY,eAAb,GAA+BvC,OAAOiC,OAAP,CAAeC,MAA9C;AACAP,iBAAaa,cAAb,CAA4B,EAA5B,EAAgC,aAAhC;AACAb,iBAAac,MAAb,CAAoB,UAApB,EAAgC,GAAhC;AACAd,iBAAac,MAAb,CAAoB,UAApB,EAAgC,CAAhC;AACAd,iBAAac,MAAb,CAAoB,iBAApB,EAAuC,IAAvC;AACAd,iBAAac,MAAb,CAAoB,kBAApB,EAAwC,IAAxC;;AAEA;AACA9B,aAASZ,KAAKoC,GAAL,CAASO,MAAT,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,MAA1B,CAAT;AACA/B,WAAOgC,MAAP,CAAcC,KAAd,CAAoB,GAApB,EAAyB,GAAzB;AACAjC,WAAOkC,KAAP,CAAaD,KAAb,CAAmB,GAAnB,EAAwB,GAAxB;AACA7C,SAAKgC,OAAL,CAAae,MAAb,CAAoBnC,MAApB,EAA4BX,OAAOiC,OAAP,CAAeC,MAA3C;;AAEA;AACAtB,aAASb,KAAKoC,GAAL,CAASE,KAAT,EAAT;AACAzB,WAAO0B,UAAP,GAAoB,IAApB;AACA1B,WAAO2B,eAAP,GAAyBvC,OAAOiC,OAAP,CAAeC,MAAxC;;AAEAa;;AAEA;AACA3B,kBAAc,UAAd;AACAC,gBAAYtB,KAAKoC,GAAL,CAASa,IAAT,CAAc,EAAd,EAAkB,EAAlB,EAAsB5B,cAAcD,KAApC,EAA2C,EAAE8B,MAAM,YAAR,EAAsBC,MAAM,SAA5B,EAA3C,CAAZ;;AAEA;AACA5B,YAAQvB,KAAKoC,GAAL,CAASE,KAAT,EAAR;AACAtC,SAAKoC,GAAL,CAASa,IAAT,CAAcjD,KAAKoD,KAAL,CAAWC,KAAX,GAAmB,GAAjC,EAAsC,EAAtC,EAA0C,OAA1C,EAAmD,EAAEH,MAAM,YAAR,EAAsBC,MAAM,SAA5B,EAAnD;;AAEA;AACAzB,gBAAY1B,KAAKoC,GAAL,CAASa,IAAT,CAAcjD,KAAKoD,KAAL,CAAWE,OAAzB,EAAiCtD,KAAKoD,KAAL,CAAWG,OAA5C,EAAoD,GAApD,EAAyD,EAAEL,MAAM,YAAR,EAAsBC,MAAM,SAA5B,EAAuCK,OAAO,QAA9C,EAAzD,CAAZ;AACA9B,cAAUkB,MAAV,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,GAA5B;AACAnB,cAAU+B,OAAV,GAAoB,KAApB;;AAEA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EACA;AACI,YAAIC,OAAOpC,MAAMlB,MAAN,CAAaL,KAAKoD,KAAL,CAAWC,KAAX,GAAmB,GAAnB,GAA0B,KAAKK,CAA5C,EAAgD,EAAhD,EAAoD,MAApD,CAAX;AACAC,aAAKf,MAAL,CAAYC,KAAZ,CAAkB,GAAlB,EAAuB,GAAvB;AACAc,aAAKb,KAAL,CAAWD,KAAX,CAAiB,IAAjB,EAAuB,IAAvB;AACAc,aAAKC,KAAL,GAAa,CAAb;AACAD,aAAKE,KAAL,GAAa,CAAb;AACH;;AAED;AACA3C,iBAAalB,KAAKoC,GAAL,CAASE,KAAT,EAAb;AACApB,eAAWuB,cAAX,CAA0B,EAA1B,EAA8B,QAA9B;AACAvB,eAAW4C,OAAX,CAAmBC,YAAnB,EAAiC,IAAjC;;AAEA;AACA/C,cAAUhB,KAAKgE,KAAL,CAAWC,QAAX,CAAoBC,gBAApB,EAAV;AACAjD,iBAAajB,KAAKgE,KAAL,CAAWC,QAAX,CAAoBE,MAApB,CAA2BlE,OAAOmE,QAAP,CAAgBC,QAA3C,CAAb;AAEH;;AAED,SAASrB,YAAT,GAAyB;;AAErB,SAAK,IAAIsB,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EACA;AACI,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EACA;AACI,gBAAIC,QAAQ3D,OAAOR,MAAP,CAAckE,IAAI,EAAlB,EAAsBD,IAAI,EAA1B,EAA8B,SAA9B,CAAZ;AACAE,kBAAM5B,MAAN,CAAaC,KAAb,CAAmB,GAAnB,EAAwB,GAAxB;AACA2B,kBAAMC,UAAN,CAAiBrC,GAAjB,CAAqB,KAArB,EAA4B,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAA5B,EAA4C,EAA5C,EAAgD,IAAhD;AACAoC,kBAAME,IAAN,CAAW,KAAX;AACAF,kBAAMG,IAAN,CAAWC,KAAX,GAAmB,KAAnB;AACH;AACJ;;AAED/D,WAAO0D,CAAP,GAAW,GAAX;AACA1D,WAAOyD,CAAP,GAAW,EAAX;;AAEA;AACA,QAAIO,QAAQ7E,KAAKoC,GAAL,CAASyC,KAAT,CAAehE,MAAf,EAAuBiE,EAAvB,CAA2B,EAAEP,GAAG,GAAL,EAA3B,EAAuC,IAAvC,EAA6CtE,OAAO8E,MAAP,CAAcC,MAAd,CAAqBC,IAAlE,EAAwE,IAAxE,EAA8E,CAA9E,EAAiF,IAAjF,EAAuF,IAAvF,CAAZ;;AAEA;AACAJ,UAAMK,MAAN,CAAa9C,GAAb,CAAiB+C,OAAjB,EAA0B,IAA1B;AACH;;AAED,SAASpB,YAAT,CAAuBqB,OAAvB,EAAgC;;AAE5BA,YAAQxC,MAAR,CAAe2B,CAAf,GAAmB,GAAnB;AACAa,YAAQxC,MAAR,CAAe0B,CAAf,GAAmB,GAAnB;AACAc,YAAQX,UAAR,CAAmBrC,GAAnB,CAAuB,QAAvB;AAEH;;AAED,SAAS+C,OAAT,GAAmB;;AAEftE,WAAOyD,CAAP,IAAY,EAAZ;AAEH;;AAED,SAAShE,MAAT,GAAkB;;AAEd;AACAa,cAAUkE,YAAV,CAAuBd,CAAvB,IAA4B,CAA5B;;AAEA,QAAI3D,OAAO0E,KAAX,EACA;AACI;AACA1E,eAAO+D,IAAP,CAAYY,QAAZ,CAAqB1C,KAArB,CAA2B,CAA3B,EAA8B,CAA9B;;AAEA,YAAI7B,QAAQwE,IAAR,CAAaC,MAAjB,EACA;AACI7E,mBAAO+D,IAAP,CAAYY,QAAZ,CAAqBhB,CAArB,GAAyB,CAAC,GAA1B;AACH,SAHD,MAIK,IAAIvD,QAAQ0E,KAAR,CAAcD,MAAlB,EACL;AACI7E,mBAAO+D,IAAP,CAAYY,QAAZ,CAAqBhB,CAArB,GAAyB,GAAzB;AACH,SAHI,MAIA,IAAIvD,QAAQ2E,EAAR,CAAWF,MAAf,EACL;AACI7E,mBAAO+D,IAAP,CAAYY,QAAZ,CAAqBjB,CAArB,GAAyB,CAAC,GAA1B;AACH,SAHI,MAIA,IAAItD,QAAQ4E,IAAR,CAAaH,MAAjB,EACL;AACI7E,mBAAO+D,IAAP,CAAYY,QAAZ,CAAqBjB,CAArB,GAAyB,GAAzB;AACH;;AAED;AACA,YAAIrD,WAAWwE,MAAf,EACA;AACII;AACH;;AAED,YAAI7F,KAAK8F,IAAL,CAAUC,GAAV,GAAgBtE,WAApB,EACA;AACIuE;AACH;;AAED;AACAhG,aAAKgC,OAAL,CAAaiE,MAAb,CAAoBC,OAApB,CAA4BpF,OAA5B,EAAqCD,MAArC,EAA6CsF,gBAA7C,EAA+D,IAA/D,EAAqE,IAArE;AACAnG,aAAKgC,OAAL,CAAaiE,MAAb,CAAoBC,OAApB,CAA4BtE,YAA5B,EAA0ChB,MAA1C,EAAkDwF,eAAlD,EAAmE,IAAnE,EAAyE,IAAzE;AACH;AAEJ;;AAED,SAAS7F,MAAT,GAAkB;;AAEd;AACA;AACA;AACA;;AAEH;;AAED,SAAS4F,gBAAT,CAA2BrE,MAA3B,EAAmC0C,KAAnC,EAA0C;;AAEtC;AACA1C,WAAOuE,IAAP;AACA7B,UAAM6B,IAAN;;AAEA;AACAjF,aAAS,EAAT;AACAE,cAAU2B,IAAV,GAAiB5B,cAAcD,KAA/B;;AAEA;AACA,QAAIkF,YAAYpF,WAAWqF,cAAX,CAA0B,KAA1B,CAAhB;AACAD,cAAUE,KAAV,CAAgBhC,MAAMG,IAAN,CAAWJ,CAA3B,EAA8BC,MAAMG,IAAN,CAAWL,CAAzC;AACAgC,cAAU5B,IAAV,CAAe,QAAf,EAAyB,EAAzB,EAA6B,KAA7B,EAAoC,IAApC;;AAEA,QAAI7D,OAAO4F,WAAP,MAAwB,CAA5B,EACA;AACIrF,iBAAS,IAAT;AACAE,kBAAU2B,IAAV,GAAiB5B,cAAcD,KAA/B;;AAEAQ,qBAAa8E,OAAb,CAAqB,MAArB,EAA4B,IAA5B;AACAhF,kBAAUuB,IAAV,GAAiB,+BAAjB;AACAvB,kBAAU+B,OAAV,GAAoB,IAApB;;AAEA;AACAzD,aAAKgE,KAAL,CAAW2C,KAAX,CAAiBC,OAAjB,CAAyBC,OAAzB,EAAiC,IAAjC;AACH;AAEJ;;AAED,SAAST,eAAT,CAA0BxF,MAA1B,EAAiCkB,MAAjC,EAAyC;;AAErCA,WAAOuE,IAAP;;AAEAxE,WAAON,MAAMuF,aAAN,EAAP;;AAEA,QAAIjF,IAAJ,EACA;AACIA,aAAKwE,IAAL;AACH;;AAED;AACA,QAAIC,YAAYpF,WAAWqF,cAAX,CAA0B,KAA1B,CAAhB;AACAD,cAAUE,KAAV,CAAgB5F,OAAO+D,IAAP,CAAYJ,CAA5B,EAA+B3D,OAAO+D,IAAP,CAAYL,CAA3C;AACAgC,cAAU5B,IAAV,CAAe,QAAf,EAAyB,EAAzB,EAA6B,KAA7B,EAAoC,IAApC;;AAEA;AACA,QAAInD,MAAMkF,WAAN,KAAsB,CAA1B,EACA;AACI7F,eAAOyF,IAAP;AACAzE,qBAAa8E,OAAb,CAAqB,MAArB;;AAEAhF,kBAAUuB,IAAV,GAAe,gCAAf;AACAvB,kBAAU+B,OAAV,GAAoB,IAApB;;AAEA;AACAzD,aAAKgE,KAAL,CAAW2C,KAAX,CAAiBC,OAAjB,CAAyBC,OAAzB,EAAiC,IAAjC;AACH;AAEJ;;AAED,SAASb,UAAT,GAAuB;;AAEnB;AACAxE,kBAAcI,aAAa2E,cAAb,CAA4B,KAA5B,CAAd;;AAEA5E,kBAAcoF,MAAd,GAAqB,CAArB;;AAEAlG,WAAOmG,YAAP,CAAoB,UAASxC,KAAT,EAAe;;AAE/B;AACA7C,sBAAcsF,IAAd,CAAmBzC,KAAnB;AACH,KAJD;;AAOA,QAAIhD,eAAeG,cAAcoF,MAAd,GAAuB,CAA1C,EACA;;AAEI,YAAIG,SAAOlH,KAAKmH,GAAL,CAASC,cAAT,CAAwB,CAAxB,EAA0BzF,cAAcoF,MAAd,GAAqB,CAA/C,CAAX;;AAEA;AACA,YAAIM,UAAQ1F,cAAcuF,MAAd,CAAZ;AACA;AACA1F,oBAAYgF,KAAZ,CAAkBa,QAAQ1C,IAAR,CAAaJ,CAA/B,EAAkC8C,QAAQ1C,IAAR,CAAaL,CAA/C;;AAEAtE,aAAKgC,OAAL,CAAaiE,MAAb,CAAoBqB,YAApB,CAAiC9F,WAAjC,EAA6CZ,MAA7C,EAAoD,GAApD;AACAa,sBAAczB,KAAK8F,IAAL,CAAUC,GAAV,GAAgB,IAA9B;AACH;AAEJ;;AAED,SAASF,UAAT,GAAuB;;AAEnB;AACA,QAAI7F,KAAK8F,IAAL,CAAUC,GAAV,GAAgBhF,UAApB,EACA;AACI;AACAe,iBAAShB,QAAQyF,cAAR,CAAuB,KAAvB,CAAT;;AAEA,YAAIzE,MAAJ,EACA;AACI;AACAA,mBAAO0E,KAAP,CAAa5F,OAAO2D,CAApB,EAAuB3D,OAAO0D,CAAP,GAAW,CAAlC;AACAxC,mBAAO6C,IAAP,CAAYY,QAAZ,CAAqBjB,CAArB,GAAyB,CAAC,GAA1B;AACAvD,yBAAaf,KAAK8F,IAAL,CAAUC,GAAV,GAAgB,GAA7B;AACH;AACJ;AAEJ;;AAED,SAASwB,WAAT,CAAsBzF,MAAtB,EAA8B;;AAE1B;AACAA,WAAOuE,IAAP;AAEH;;AAED,SAASQ,OAAT,GAAoB;;AAEhB;;AAEA;AACAtF,UAAMmF,OAAN,CAAc,QAAd;AACA;AACA7F,WAAO2G,SAAP;AACAxE;;AAEA;AACApC,WAAO6G,MAAP;AACA;AACA/F,cAAU+B,OAAV,GAAoB,KAApB;AAEH","file":"main.06432669.map","sourceRoot":"..","sourcesContent":["import '../styles/main.scss'\n\nvar game = new Phaser.Game(960, 540, Phaser.AUTO, 'phaser-example', { preload: preload, create: create, update: update, render: render });\n\n\n\n// StarGame.StateA = {\n//     preload: function() {\n\n//     },\n//     create: function () {\n//         this.game.stage.backgroundColor = '#806000';\n//         stateText = game.add.text(game.world.centerX,game.world.centerY,'You Won! \\n Click to restart', { font: '80px Gaegu', fill: '#49634f', align: \"center\" });\n//         stateText.anchor.setTo(0.5, 0.5);\n//     },\n\n// }\n\n\n\n\n////\nfunction preload() {\n\n    game.load.image('bullet', require('../images/bullet3.png'));\n    game.load.image('enemyBullet', require('../images/enemy-bullet2.png'));\n    game.load.spritesheet('invader', require('../images/invader32x32x4-2.png'), 32, 32);\n    game.load.image('ship', require('../images/egg.svg'));\n    game.load.spritesheet('kaboom', require('../images/explode4.png'), 128, 128);\n    game.load.image('starfield', require('../images/bg2.png'))\n    game.load.image('life', require('../images/life.svg'));\n\n\n}\n\nvar player;\nvar aliens;\nvar bullets;\nvar bulletTime = 0;\nvar cursors;\nvar fireButton;\nvar explosions;\nvar starfield;\nvar score = 0;\nvar scoreString = '';\nvar scoreText;\nvar lives;\nvar enemyBullet;\nvar firingTimer = 0;\nvar stateText;\nvar livingEnemies = [];\nvar enemyBullets;\nvar live;\nvar bullet;\nvar life;\n\nfunction create() {\n\n    game.physics.startSystem(Phaser.Physics.ARCADE);\n\n    //  The scrolling starfield background\n    starfield = game.add.tileSprite(0, 0, 960, 540, 'starfield');\n\n    //  Our bullet group\n    bullets = game.add.group();\n    bullets.enableBody = true;\n    bullets.physicsBodyType = Phaser.Physics.ARCADE;\n    bullets.createMultiple(30, 'bullet');\n    bullets.setAll('anchor.x', 0.5);\n    bullets.setAll('anchor.y', 1);\n    bullets.setAll('outOfBoundsKill', true);\n    bullets.setAll('checkWorldBounds', true);\n\n    // The enemy's bullets\n    enemyBullets = game.add.group();\n    enemyBullets.enableBody = true;\n    enemyBullets.physicsBodyType = Phaser.Physics.ARCADE;\n    enemyBullets.createMultiple(30, 'enemyBullet');\n    enemyBullets.setAll('anchor.x', 0.5);\n    enemyBullets.setAll('anchor.y', 1);\n    enemyBullets.setAll('outOfBoundsKill', true);\n    enemyBullets.setAll('checkWorldBounds', true);\n\n    //  The hero!\n    player = game.add.sprite(480, 460, 'ship');\n    player.anchor.setTo(0.5, 0.5);\n    player.scale.setTo(0.6, 0.6);\n    game.physics.enable(player, Phaser.Physics.ARCADE);\n\n    //  The baddies!\n    aliens = game.add.group();\n    aliens.enableBody = true;\n    aliens.physicsBodyType = Phaser.Physics.ARCADE;\n\n    createAliens();\n\n    //  The score\n    scoreString = 'SCORE : ';\n    scoreText = game.add.text(20, 20, scoreString + score, { font: '28px Gaegu', fill: '#49634f' });\n\n    //  Lives\n    lives = game.add.group();\n    game.add.text(game.world.width - 200, 20, 'LIVES', { font: '28px Gaegu', fill: '#49634f' });\n\n    //  Text\n    stateText = game.add.text(game.world.centerX,game.world.centerY,' ', { font: '80px Gaegu', fill: '#49634f', align: \"center\" });\n    stateText.anchor.setTo(0.5, 0.5);\n    stateText.visible = false;\n\n    for (var i = 0; i < 3; i++) \n    {\n        var ship = lives.create(game.world.width - 100 + (30 * i), 40, 'life');\n        ship.anchor.setTo(0.5, 0.5);\n        ship.scale.setTo(0.15, 0.15);\n        ship.angle = 0;\n        ship.alpha = 1;\n    }\n\n    //  An explosion pool\n    explosions = game.add.group();\n    explosions.createMultiple(30, 'kaboom');\n    explosions.forEach(setupInvader, this);\n\n    //  And some controls to play the game with\n    cursors = game.input.keyboard.createCursorKeys();\n    fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);\n    \n}\n\nfunction createAliens () {\n\n    for (var y = 0; y < 4; y++)\n    {\n        for (var x = 0; x < 10; x++)\n        {\n            var alien = aliens.create(x * 48, y * 50, 'invader');\n            alien.anchor.setTo(0.5, 0.5);\n            alien.animations.add('fly', [ 0, 1, 2, 3 ], 10, true);\n            alien.play('fly');\n            alien.body.moves = false;\n        }\n    }\n\n    aliens.x = 100;\n    aliens.y = 50;\n\n    //  All this does is basically start the invaders moving. Notice we're moving the Group they belong to, rather than the invaders directly.\n    var tween = game.add.tween(aliens).to( { x: 200 }, 2000, Phaser.Easing.Linear.None, true, 0, 1000, true);\n\n    //  When the tween loops it calls descend\n    tween.onLoop.add(descend, this);\n}\n\nfunction setupInvader (invader) {\n\n    invader.anchor.x = 0.5;\n    invader.anchor.y = 0.5;\n    invader.animations.add('kaboom');\n\n}\n\nfunction descend() {\n\n    aliens.y += 10;\n\n}\n\nfunction update() {\n\n    //  Scroll the background\n    starfield.tilePosition.x += 2;\n\n    if (player.alive)\n    {\n        //  Reset the player, then check for movement keys\n        player.body.velocity.setTo(0, 0);\n\n        if (cursors.left.isDown)\n        {\n            player.body.velocity.x = -200;\n        }\n        else if (cursors.right.isDown)\n        {\n            player.body.velocity.x = 200;\n        }\n        else if (cursors.up.isDown)\n        {\n            player.body.velocity.y = -200;\n        }\n        else if (cursors.down.isDown)\n        {\n            player.body.velocity.y = 200;\n        }\n\n        //  Firing?\n        if (fireButton.isDown)\n        {\n            fireBullet();\n        }\n\n        if (game.time.now > firingTimer)\n        {\n            enemyFires();\n        }\n\n        //  Run collision\n        game.physics.arcade.overlap(bullets, aliens, collisionHandler, null, this);\n        game.physics.arcade.overlap(enemyBullets, player, enemyHitsPlayer, null, this);\n    }\n\n}\n\nfunction render() {\n\n    // for (var i = 0; i < aliens.length; i++)\n    // {\n    //     game.debug.body(aliens.children[i]);\n    // }\n\n}\n\nfunction collisionHandler (bullet, alien) {\n\n    //  When a bullet hits an alien we kill them both\n    bullet.kill();\n    alien.kill();\n\n    //  Increase the score\n    score += 20;\n    scoreText.text = scoreString + score;\n\n    //  And create an explosion :)\n    var explosion = explosions.getFirstExists(false);\n    explosion.reset(alien.body.x, alien.body.y);\n    explosion.play('kaboom', 30, false, true);\n\n    if (aliens.countLiving() == 0)\n    {\n        score += 1000;\n        scoreText.text = scoreString + score;\n\n        enemyBullets.callAll('kill',this);\n        stateText.text = \" You Won! \\n Click to restart\";\n        stateText.visible = true;\n\n        //the \"click to restart\" handler\n        game.input.onTap.addOnce(restart,this);\n    }\n\n}\n\nfunction enemyHitsPlayer (player,bullet) {\n    \n    bullet.kill();\n\n    live = lives.getFirstAlive();\n\n    if (live)\n    {\n        live.kill();\n    }\n\n    //  And create an explosion :)\n    var explosion = explosions.getFirstExists(false);\n    explosion.reset(player.body.x, player.body.y);\n    explosion.play('kaboom', 30, false, true);\n\n    // When the player dies\n    if (lives.countLiving() < 1)\n    {\n        player.kill();\n        enemyBullets.callAll('kill');\n\n        stateText.text=\" GAME OVER \\n Click to restart\";\n        stateText.visible = true;\n\n        //the \"click to restart\" handler\n        game.input.onTap.addOnce(restart,this);\n    }\n\n}\n\nfunction enemyFires () {\n\n    //  Grab the first bullet we can from the pool\n    enemyBullet = enemyBullets.getFirstExists(false);\n\n    livingEnemies.length=0;\n\n    aliens.forEachAlive(function(alien){\n\n        // put every living enemy in an array\n        livingEnemies.push(alien);\n    });\n\n\n    if (enemyBullet && livingEnemies.length > 0)\n    {\n        \n        var random=game.rnd.integerInRange(0,livingEnemies.length-1);\n\n        // randomly select one of them\n        var shooter=livingEnemies[random];\n        // And fire the bullet from this enemy\n        enemyBullet.reset(shooter.body.x, shooter.body.y);\n\n        game.physics.arcade.moveToObject(enemyBullet,player,120);\n        firingTimer = game.time.now + 2000;\n    }\n\n}\n\nfunction fireBullet () {\n\n    //  To avoid them being allowed to fire too fast we set a time limit\n    if (game.time.now > bulletTime)\n    {\n        //  Grab the first bullet we can from the pool\n        bullet = bullets.getFirstExists(false);\n\n        if (bullet)\n        {\n            //  And fire it\n            bullet.reset(player.x, player.y + 8);\n            bullet.body.velocity.y = -400;\n            bulletTime = game.time.now + 200;\n        }\n    }\n\n}\n\nfunction resetBullet (bullet) {\n\n    //  Called if the bullet goes out of the screen\n    bullet.kill();\n\n}\n\nfunction restart () {\n\n    //  A new level starts\n    \n    //resets the life count\n    lives.callAll('revive');\n    //  And brings the aliens back from the dead :)\n    aliens.removeAll();\n    createAliens();\n\n    //revives the player\n    player.revive();\n    //hides the text\n    stateText.visible = false;\n\n}\n"]}